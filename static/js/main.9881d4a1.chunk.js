(this["webpackJsonpstartrack-js"]=this["webpackJsonpstartrack-js"]||[]).push([[0],{119:function(e,t,r){},120:function(e,t,r){},121:function(e,t,r){},130:function(e,t,r){},131:function(e,t,r){},134:function(e,t,r){},138:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(21),s=r.n(n),c=(r(92),r(156)),o=r(155),i=r(7),l=r(143),u=r(152),d=r(144),j=r(30),b=r(12),h=r(13),p=r(1);function f(e){var t=e.accessToken,r=e.storageType,a=e.onLoginClick,n=e.onLogoutClick,s=function(){return null!==t&&void 0!==t?t.substring(0,6):""},o=Object(j.useMediaQuery)({query:"(max-width: 650px)"});return null===t||void 0===t||""===t?Object(p.jsx)(l.a,{variant:"outline-light",onClick:a,children:o?Object(p.jsx)(b.a,{icon:h.e,className:"mr-1"}):"GitHub Authentication"}):Object(p.jsxs)("div",{children:[o?Object(p.jsx)(u.a,{trigger:"click",placement:"bottom",overlay:Object(p.jsxs)(d.a,{children:["Access token '",s(),"' stored in"," ",r]}),children:Object(p.jsx)(l.a,{children:Object(p.jsx)(b.a,{icon:h.d,className:"mr-1"})})}):Object(p.jsx)(u.a,{placement:"bottom",delay:{show:250},overlay:Object(p.jsxs)(d.a,{children:["Access token stored in ",r]}),children:Object(p.jsxs)(c.a.Text,{className:"mr-2 ml-2",children:[Object(p.jsx)(b.a,{icon:h.d,className:"mr-1"}),s()]})}),Object(p.jsx)(l.a,{variant:"outline-light",onClick:n,children:o?Object(p.jsx)(b.a,{icon:h.f,className:"mr-1"}):"Log Out"})]})}var g=r(153),m=r(154),x=r(26),O=r(36),v=r(14),y=r.n(v),k=r(24),w=r(33),S=r(34),C=r(65),D=r.n(C),R="statrack_js_access_token",T="local storage",N="session storage",P=function(){function e(){Object(w.a)(this,e)}return Object(S.a)(e,[{key:"validateAndStoreAccessToken",value:function(){var e=Object(k.a)(y.a.mark((function e(t,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://api.github.com/user",this._prepareRequestHeaders(t));case 2:this._setStorageType(r).setItem(R,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeAccessToken",value:function(){this._getStorage().removeItem(R)}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"_loadStarGazerPage",value:function(){var e=Object(k.a)(y.a.mark((function e(t,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get(t.replace("{page}",r),this._prepareRequestHeaders(this.getAccessToken()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_addStarData",value:function(e,t,r){for(var a=0;a<r.data.length;a++)e.push({x:r.data[a].starred_at,y:t++});return t}},{key:"loadStargazers",value:function(){var t=Object(k.a)(y.a.mark((function t(r,a,n,s){var c,o=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(y.a.mark((function t(){var c,i,l,u,d,j,b,h,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=[],i=1,l="https://api.github.com/repos/{user}/{repo}/stargazers?per_page=100&page={page}".replace("{user}",r).replace("{repo}",a),n(0),t.next=6,o._loadStarGazerPage(l,1);case 6:if(u=t.sent,!((d=o._getLastStargazerPage(u.headers.link))>30)||o.isLoggedIn()){t.next=10;break}throw Error('Cannot load a repo with more than 3000 stars without GitHub access token. Please click "GitHub Authentication" and provide one');case 10:i=o._addStarData(c,i,u),n(1/d*100),j=2;case 13:if(!(j<=d)){t.next=25;break}if(!s()){t.next=16;break}return t.abrupt("return",{v:null});case 16:return b=Math.min(j+5,d+1)-j,t.next=19,Promise.all(e._range(b,j).map((function(e){return o._loadStarGazerPage(l,e)})));case 19:for(h=t.sent,p=0;p<b;p++)i=o._addStarData(c,i,h[p]);n(((j+=b)-1)/d*100),t.next=13;break;case 25:return t.abrupt("return",{v:c});case 26:case"end":return t.stop()}}),t)}))(),"t0",2);case 2:if("object"!==typeof(c=t.t0)){t.next=5;break}return t.abrupt("return",c.v);case 5:t.next=20;break;case 7:if(t.prev=7,t.t1=t.catch(0),void 0!==t.t1.response){t.next=11;break}throw t.t1;case 11:if(404!==t.t1.response.status){t.next=15;break}throw Error("Repo "+r+"/"+a+" Not found");case 15:if(403!==t.t1.response.status){t.next=19;break}throw Error("API rate limit exceeded!"+(this.isLoggedIn()?"":' Please click "GitHub Authentication" and provide GitHub access token to increase rate limit'));case 19:throw Error("Couldn't fetch stargazers data, error code "+t.t1.response.status+" returned"+(t.t1.response.data.message&&""!==t.t1.response.data.message?": "+t.t1.response.data.message:""));case 20:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,r,a,n){return t.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){return this._getStorage().getItem(R)}},{key:"isLoggedIn",value:function(){var e=this.getAccessToken();return null!==e&&void 0!==e&&""!==e}},{key:"getRepoUrl",value:function(e,t){return"https://github.com/{user}/{repo}".replace("{user}",e).replace("{repo}",t)}},{key:"getStorageType",value:function(){switch(this._getStorage()){case sessionStorage:return N;case localStorage:return T;default:return null}}},{key:"_getStorage",value:function(){return e._storage}},{key:"_setStorageType",value:function(t){if(this.removeAccessToken(),t===T)e._storage=localStorage;else e._storage=sessionStorage;return e._storage}},{key:"_prepareRequestHeaders",value:function(e){return{headers:Object(O.a)({Accept:"application/vnd.github.v3.star+json"},void 0!==e&&null!==e&&""!==e&&{Authorization:"token "+e})}}},{key:"_getLastStargazerPage",value:function(e){if(void 0===e||0===e.length)return 1;var t=e.split(",");for(var r in t){var a=t[r].split(";");if(2===a.length){var n=a[0].replace(/<(.*)>/,"$1").trim();if("last"===a[1].replace(/rel="(.*)"/,"$1").trim())return n.replace(/(.*)&page=(.*)/,"$2").trim()}}}}],[{key:"_range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(x.a)(Array(e).keys()).map((function(e){return e+t}))}},{key:"_getStorageDefault",value:function(){return null!==sessionStorage.getItem(R)&&void 0!==sessionStorage.getItem(R)&&""!==sessionStorage.getItem(R)?sessionStorage:null!==localStorage.getItem(R)&&void 0!==localStorage.getItem(R)&&""!==localStorage.getItem(R)?localStorage:sessionStorage}}]),e}();P._storage=P._getStorageDefault();var L=new P;Object.freeze(L);var _=L,z="init",A="valid",M="invalid",I="did-not-check";function B(e){var t=e.show,r=e.handleLoginSuccess,n=e.handleClose,s=Object(a.useState)(z),c=Object(i.a)(s,2),o=c[0],u=c[1],d=Object(a.useRef)(),j=Object(a.useRef)(),b=Object(a.useRef)(),h=function(){b.current=n,u(I)};return Object(a.useEffect)((function(){null!==b.current&&void 0!==b.current&&(b.current(),u(z))}),[o]),Object(p.jsx)(g.a,{show:t,onHide:h,children:Object(p.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),_.validateAndStoreAccessToken(d.current.value,j.current.checked?T:N).then((function(){b.current=r,u(A)})).catch((function(){b.current=null,u(M)}))},children:[Object(p.jsx)(g.a.Header,{closeButton:!0,children:Object(p.jsx)(g.a.Title,{children:"GitHub Authentication"})}),Object(p.jsxs)(g.a.Body,{children:[Object(p.jsxs)("p",{children:["GitHub API"," ",Object(p.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://developer.github.com/v3/#rate-limiting",children:"rate limiter"})," ","makes it impossible to collect stargazer data on repos with more than 3000 stars without GitHub authentication."]}),Object(p.jsx)("p",{children:"If you'd like to view stargazer data for this repo, please provide your GitHub auth details."}),Object(p.jsx)("p",{children:"Please note these credentials aren't stored in any server. This application is based on pure javascript so the credentials are only used to send authenticated requests to GitHub API."}),Object(p.jsxs)(m.a.Group,{controlId:"githubAuthenticationForm",children:[Object(p.jsxs)(m.a.Label,{children:["GitHub access token (generate one"," ",Object(p.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/settings/tokens",children:"here"}),")"]}),Object(p.jsx)(m.a.Control,{ref:d,type:"text",placeholder:"fc516773214acf13d10f856c6b80037999da4fd3",isInvalid:o===M,required:!0}),Object(p.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Access token is invalid."}),Object(p.jsx)(m.a.Text,{className:"text-muted",children:"These credentials aren't stored in any server."}),Object(p.jsx)(m.a.Check,{ref:j,inline:!0,type:"checkbox",id:"storageType",label:"Save access token in local storage"}),Object(p.jsx)(m.a.Label,{children:Object(p.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://stackoverflow.com/questions/5523140/html5-local-storage-vs-session-storage",children:"Learn more"})})]})]}),Object(p.jsxs)(g.a.Footer,{children:[Object(p.jsx)(l.a,{variant:"secondary",onClick:h,children:"Close"}),Object(p.jsx)(l.a,{variant:"primary",type:"submit",children:"Login"})]})]})})}function G(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(_.getAccessToken()),c=Object(i.a)(s,2),o=c[0],l=c[1],u=Object(a.useState)(_.getStorageType()),d=Object(i.a)(u,2),j=d[0],b=d[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)(f,{onLoginClick:function(){n(!0)},onLogoutClick:function(){_.removeAccessToken(),l(_.getAccessToken()),b(_.getStorageType())},accessToken:o,storageType:j}),Object(p.jsx)(B,{show:r,handleClose:function(){n(!1),l(_.getAccessToken()),b(_.getStorageType())},handleLoginSuccess:function(){n(!1),l(_.getAccessToken()),b(_.getStorageType())}})]})}var F=r(51),H=r(83);function q(){var e=Object(j.useMediaQuery)({query:"(max-width: 650px)"});return Object(p.jsxs)(c.a,{bg:"primary",variant:"dark",children:[Object(p.jsxs)(c.a.Brand,{href:"#/",children:[Object(p.jsx)("img",{alt:"",src:window.location.pathname+"star-icon.png",width:"30",height:"30",className:"d-inline-block align-top"})," ","StarTrack v",H.version]}),Object(p.jsx)(o.a,{className:"mr-auto"}),Object(p.jsx)(o.a,{children:Object(p.jsxs)(o.a.Link,{href:"https://github.com/seladb/startrack-js",target:"_blank",rel:"noopener noreferrer",children:[Object(p.jsx)(b.a,{icon:F.a,className:"mr-1"}),e?"":"Project On GitHub"]})}),Object(p.jsx)(G,{})]})}var E=r(157),U=r(148),K=(r(119),r(63),r(120),r(145)),V=r(146),W=r(81),Y=r(147);function Q(e){var t=e.userName,r=e.repoName,a=e.loadInProgress,n=e.handleKeyPress,s=e.handlePaste,c=e.onStopClick,o=e.onGoClick;return Object(p.jsx)(K.a,{children:Object(p.jsxs)(V.a,{children:[Object(p.jsx)(V.a.Prepend,{children:Object(p.jsx)(u.a,{placement:"bottom",delay:{show:100},overlay:Object(p.jsx)(d.a,{children:'Tip: you can paste any GitHub URL or string in the format of "username/repo"'}),children:Object(p.jsx)(V.a.Text,{children:"Repo Details"})})}),Object(p.jsx)(W.a,{ref:t,placeholder:"Username","aria-label":"Username",onKeyPress:n,onPaste:s}),Object(p.jsx)(V.a.Prepend,{children:Object(p.jsx)(V.a.Text,{children:"/"})}),Object(p.jsx)(W.a,{ref:r,placeholder:"Repo name","aria-label":"Repo name",onKeyPress:n,onPaste:s}),a?Object(p.jsxs)("div",{children:[Object(p.jsxs)(l.a,{className:"RepoDetailsDesktopLayout-loadingButton",type:"button",disabled:!0,children:[Object(p.jsx)(Y.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Loading..."]}),Object(p.jsx)(l.a,{className:"RepoDetails-stopButton",onClick:c,children:Object(p.jsx)(b.a,{icon:h.g})})]}):Object(p.jsx)(l.a,{className:"RepoDetailsDesktopLayout-goButton",type:"button",onClick:o,children:"Go!"})]})})}r(121);function $(e){var t=e.userName,r=e.repoName,a=e.loadInProgress,n=e.handleKeyPress,s=e.handlePaste,c=e.onStopClick,o=e.onGoClick;return Object(p.jsxs)(U.a,{children:[Object(p.jsx)(K.a,{children:Object(p.jsx)(m.a.Label,{className:"RepoDetailsMobileLayout-headline",children:"Repo Details"})}),Object(p.jsx)(K.a,{children:Object(p.jsx)(W.a,{ref:t,placeholder:"Username","aria-label":"Username",onKeyPress:n,onPaste:s})}),Object(p.jsx)(K.a,{children:Object(p.jsx)(W.a,{ref:r,placeholder:"Repo name","aria-label":"Repo name",onKeyPress:n,onPaste:s})}),Object(p.jsx)(K.a,{children:a?Object(p.jsxs)("div",{className:"RepoDetailsMobileLayout-loadingDiv",children:[Object(p.jsxs)(l.a,{className:"RepoDetailsMobileLayout-loadingButton",type:"button",disabled:!0,children:[Object(p.jsx)(Y.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Loading..."]}),Object(p.jsx)(l.a,{className:"RepoDetails-stopButton",onClick:c,children:Object(p.jsx)(b.a,{icon:h.g})})]}):Object(p.jsx)(l.a,{className:"RepoDetailsMobileLayout-goButton",type:"button",onClick:o,children:"Go!"})})]})}var J=r(84),X=r.n(J);function Z(e){var t=e.loadInProgress,r=e.onStopClick,n=e.onRepoDetails,s=Object(a.useRef)(),c=Object(a.useRef)(),o=function(){n(c.current.value.trim(),s.current.value.trim())},i=function(e){13!==e.charCode||t||o(),47===e.charCode&&(e.preventDefault(),s.current.focus())},l=function(e){var t=X()(e.clipboardData.getData("Text"));t&&("https:"===t.protocol&&"github.com"===t.hostname&&null!==t.name&&null!==t.owner||null===t.protocol&&null===t.hostname&&null!==t.name&&null!==t.owner)&&(e.preventDefault(),c.current.value=t.owner,s.current.value=t.name)},u=Object(j.useMediaQuery)({query:"(max-width: 520px)"});return Object(p.jsx)(U.a,{className:"RepoDetails-container",children:u?Object(p.jsx)($,{userName:c,repoName:s,onGoClick:o,handleKeyPress:i,handlePaste:l,loadInProgress:t,onStopClick:r}):Object(p.jsx)(Q,{userName:c,repoName:s,onGoClick:o,handleKeyPress:i,handlePaste:l,loadInProgress:t,onStopClick:r})})}var ee=r(82),te=r(149),re="Display forecast";function ae(e){var t=e.onForecastProps,r=Object(a.useState)(!1),n=Object(i.a)(r,2),s=n[0],c=n[1],o=Object(a.useState)(re),u=Object(i.a)(o,2),d=u[0],j=u[1],b=Object(a.useState)(!1),h=Object(i.a)(b,2),f=h[0],x=h[1],O=Object(a.useState)(""),v=Object(i.a)(O,2),y=v[0],k=v[1],w=Object(a.useRef)(),S=Object(a.useRef)(),C=Object(a.useRef)(),D=Object(a.useRef)(),R=Object(a.useRef)(),T=Object(a.useRef)(),N=function(){c(!1),j(re),T.current.checked=!1,t(null),x(!1)},P=function(e,t){switch(t){case"Days":default:return parseInt(e);case"Weeks":return 7*e;case"Months":var r=new Date;r.setMonth(r.getMonth()-e);var a=new Date;return Math.round(Math.abs((a-r)/864e5));case"Years":return 365*e}};return Object(p.jsxs)(U.a,{children:[Object(p.jsxs)(m.a,{children:[Object(p.jsx)("h3",{children:"Forecast"}),Object(p.jsx)(m.a.Check,{custom:!0,type:"checkbox",ref:T,id:"display-forecast-checkbox",label:d,onChange:function(e){e.target.checked?(c(!0),x(!1)):(j(re),t(null))}})]}),Object(p.jsx)(g.a,{show:s,onHide:N,children:Object(p.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var r={daysBackwards:P(w.current.value,S.current.value),daysForward:P(C.current.value,D.current.value),numValues:parseInt(R.current.value)};if(function(e){return e.daysBackwards<10?(x(!0),k("The forecast must be based on at least 10 days of data"),!1):e.daysForward<10?(x(!0),k("The forecast must show at least 10 days forward"),!1):!(e.daysForward>3650)||(x(!0),k("The forecast cannot show more than 10 years forward"),!1)}(r)){var a="Display ".concat(C.current.value," ").concat(D.current.value," forecast based on the last ").concat(w.current.value," ").concat(S.current.value);j(a),c(!1),t(r)}},children:[Object(p.jsx)(g.a.Header,{closeButton:!0,children:Object(p.jsx)(g.a.Title,{children:"Forecast Properties"})}),Object(p.jsxs)(g.a.Body,{children:[Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a.Label,{children:"Display forecast based on the last:"}),Object(p.jsxs)(m.a.Row,{children:[Object(p.jsx)(ee.a,{children:Object(p.jsx)(m.a.Control,{ref:w,type:"number",min:"1",defaultValue:"3",required:!0})}),Object(p.jsx)(ee.a,{children:Object(p.jsxs)(m.a.Control,{ref:S,as:"select",defaultValue:"Months",children:[Object(p.jsx)("option",{children:"Days"}),Object(p.jsx)("option",{children:"Weeks"}),Object(p.jsx)("option",{children:"Months"}),Object(p.jsx)("option",{children:"Years"})]})})]})]}),Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a.Label,{children:"Display forecast ahead:"}),Object(p.jsxs)(m.a.Row,{children:[Object(p.jsx)(ee.a,{children:Object(p.jsx)(m.a.Control,{ref:C,type:"number",min:"1",defaultValue:"3",required:!0})}),Object(p.jsx)(ee.a,{children:Object(p.jsxs)(m.a.Control,{ref:D,as:"select",defaultValue:"Months",children:[Object(p.jsx)("option",{children:"Days"}),Object(p.jsx)("option",{children:"Weeks"}),Object(p.jsx)("option",{children:"Months"}),Object(p.jsx)("option",{children:"Years"})]})})]})]}),Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a.Label,{children:"Number of forecast values to calculate:"}),Object(p.jsx)(m.a.Control,{ref:R,type:"number",min:"10",max:"100",defaultValue:"10",required:!0})]}),Object(p.jsxs)("p",{children:["The forecast is based on"," ",Object(p.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/Linear_least_squares",children:"Linear Least Squares"})," ","which creates a regression line from the existing stargazer data and extends this line into the future"]}),Object(p.jsx)(m.a.Group,{children:Object(p.jsx)(te.a,{variant:"danger",show:f,children:y})})]}),Object(p.jsxs)(g.a.Footer,{children:[Object(p.jsx)(l.a,{variant:"secondary",onClick:N,children:"Close"}),Object(p.jsx)(l.a,{variant:"primary",type:"submit",children:"Ok"})]})]})})]})}var ne=r(85),se=r.n(ne),ce=r(37),oe="linear",ie="logscale";function le(e){var t=e.repos,r=e.chartType,a=e.onTimeRangeChange,n=e.onChartTypeChange,s=t.flatMap((function(e){var t=e.username,r=e.repo,a=e.stargazerData,n=e.forecast,s=[{name:t+"/"+r,data:a}];return null!==n&&s.push({name:t+"/"+r+" (forecast)",data:n}),s})),c={chart:{id:"stargazers",zoom:{autoScaleYaxis:t.length<=1},events:{zoomed:function(e,t){var r=t.xaxis;t.yaxis;a&&a(r)}},toolbar:{tools:Object(O.a)(Object(O.a)({},["zoom","zoomin","zoomout","pan","reset"].reduce((function(e,t){return e[t]=r===oe,e}),{})),{},{customIcons:[{icon:Object(ce.a)(h.a).html,index:-2,class:"chart-fa-icon mr-1 ml-3 ".concat(r===oe?"text-primary":""),title:"Use linear scale",click:function(){n(oe)}},{icon:Object(ce.a)(h.h).html,index:-1,class:"chart-fa-icon mr-2 ".concat(r===ie?"text-primary":""),title:"Use logarithmic scale",click:function(){n(ie)}}]})}},yaxis:{logarithmic:r===ie},xaxis:{type:"datetime"},tooltip:{x:{format:"dd MMM yyyy"}},stroke:{curve:"straight",dashArray:t.flatMap((function(e){return null!==e.forecast?[0,5]:[0]}))},colors:t.flatMap((function(e){var t=e.color;return null!==e.forecast?[t,t]:[t]}))};return Object(p.jsx)(U.a,{className:"mt-5",children:Object(p.jsx)(se.a,{options:c,series:s,type:"line"})})}var ue=r(150);r(130);function de(e){var t=e.repos,r=e.requestToSyncChartTimeRange,a=function(e){return e.username+" / "+e.repo};return Object(p.jsxs)(U.a,{className:"StatsTable-topContainer",children:[Object(p.jsx)("h3",{children:"Repo stats"}),Object(p.jsx)(m.a,{className:"mb-3",children:Object(p.jsx)(m.a.Check,{type:"checkbox",label:"Sync stats to chart zoom level",onChange:function(e){r&&r(e.target.checked)}})}),Object(p.jsxs)(ue.a,{bordered:!0,responsive:!0,hover:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{className:"StatsTable-header",children:[Object(p.jsx)("th",{}),Object.keys(t[0].stats).map((function(e){return Object(p.jsx)("th",{children:e},e)}))]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsxs)("tr",{className:"StatsTable-row",style:{backgroundColor:e.color},children:[Object(p.jsx)("th",{children:a(e)}),Object.keys(e.stats).map((function(t){return Object(p.jsx)("td",{children:e.stats[t]},t)}))]},a(e))}))})]})]})}var je=window.location.origin+window.location.pathname+"#/preload?";function be(e){var t=e.repos,r=Object(a.useRef)();return Object(p.jsxs)(V.a,{className:"mb-3 mt-5",children:[Object(p.jsx)(V.a.Prepend,{children:Object(p.jsx)(V.a.Text,{id:"url",children:"URL"})}),Object(p.jsx)(W.a,{readOnly:!0,"aria-label":"URL",value:void 0===t||null===t||0===t.length?"":je+t.map((function(e){return"r={user},{repo}".replace("{user}",e.username).replace("{repo}",e.repo)})).join("&"),ref:r}),Object(p.jsx)(V.a.Append,{children:Object(p.jsx)(u.a,{placement:"right",delay:{show:250},overlay:Object(p.jsx)(d.a,{children:"Copy URL"}),children:Object(p.jsx)(l.a,{variant:"outline-secondary",onClick:function(){r.current.select(),document.execCommand("copy")},children:Object(p.jsx)(b.a,{icon:h.b})})})})]})}var he=r(151);r(131);function pe(e){var t=e.href,r=e.text,a=e.color,n=e.badgeCookieData,s=e.onBadgeClose;return Object(p.jsx)("h5",{children:Object(p.jsxs)(he.a,{pill:!0,variant:"primary",style:{backgroundColor:a},children:[void 0!==t&&null!==t?Object(p.jsx)("a",{className:"ClosableBadge-Link",target:"_blank",rel:"noopener noreferrer",href:t,children:r}):r,Object(p.jsx)(l.a,{"data-testid":"close-button",size:"sm",onClick:function(){s(n)},style:{backgroundColor:a,borderColor:a},children:Object(p.jsx)(b.a,{icon:h.i})})]})})}var fe=r(69),ge="https://github.com/seladb";function me(e){var t=e.pageEmpty?"fixed-bottom":"",r=Object(j.useMediaQuery)({query:"(max-width: 530px)"});return Object(p.jsxs)(c.a,{bg:"light",sticky:"bottom",className:t,children:[r?"":Object(p.jsx)(c.a.Text,{className:"mr-2",children:"Created by"}),Object(p.jsx)(fe.a,{href:ge,"data-size":"large","aria-label":"@seladb",children:"@seladb"}),r?Object(p.jsx)(c.a.Text,{className:"ml-2 mr-2"}):Object(p.jsx)(c.a.Text,{className:"ml-2 mr-2",children:"Give us a star:"}),Object(p.jsx)(fe.a,{href:"https://github.com/seladb/startrack-js","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star StarTrack on GitHub",children:"Star"}),Object(p.jsx)(o.a,{className:"mr-auto"}),Object(p.jsxs)(o.a,{children:[Object(p.jsx)(o.a.Link,{href:ge,target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(b.a,{icon:F.a,className:"mr-1"})}),Object(p.jsx)(o.a.Link,{href:"https://twitter.com/seladb",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(b.a,{icon:F.b,className:"mr-1"})}),Object(p.jsx)(o.a.Link,{href:"mailto:pcapplusplus@gmail.com",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(b.a,{icon:h.c,className:"mr-1"})})]})]})}var xe=r(133),Oe=new(function(){function e(){Object(w.a)(this,e)}return Object(S.a)(e,[{key:"calcStats",value:function(e,t){var r=e.map((function(e){return new Date(e.x)}));if(t&&void 0!==t.min&&void 0!==t.max){var a=new Date(t.min),n=new Date(t.max);r=r.filter((function(e){return e>=a&&e<=n}))}if(0===r.length)return{"Number of stars":0,"Number of days":0,"Average stars per day":0,"Average days per star":0,"Days with stars":0,"Max stars in one day":0,"Day with most stars":0};var s=r[0],c=r[r.length-1],o=1===r.length?1:Math.floor((c.getTime()-s.getTime())/1e3/60/60/24),i=0,l=0,u=r[0],d=1,j=Math.floor(r[0]/1e3/60/60/24-1),b=j;return r.forEach((function(e){var t=Math.floor(e/1e3/60/60/24);t===b?d+=1:(b!==j&&(i+=t-b-1),d>l&&(l=d,u=new Date(1e3*b*60*60*24)),d=1),b=t})),{"Number of stars":r.length,"Number of days":o,"Average stars per day":(r.length/o).toFixed(3),"Average days per star":(o/r.length).toFixed(3),"Days with stars":o-i,"Max stars in one day":l,"Day with most stars":u.toISOString().slice(0,10)}}},{key:"calcForecast",value:function(e,t,r,a){var n=new Date;n.setDate(n.getDate()-t);var s=e.filter((function(e){return new Date(e.x)>=n})).map((function(e){return{x:new Date(e.x).getTime(),y:e.y}}));if(s.length<=1)return null;var c=xe(s.map((function(e){return e.x})),s.map((function(e){return e.y})),{}),o=s.at(-1),i=o.y-Math.round(c(o.x));return Object(x.a)(Array(a+1).keys()).map((function(e){return r*e/a})).map((function(e){var t=new Date;return t.setDate(t.getDate()+e),{x:t.toISOString(),y:Math.round(i+c(t.getTime()))}}))}}]),e}());Object.freeze(Oe);var ve=Oe,ye=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#F86624","#00B1F2","#5A2A27"],ke=function(){function e(){Object(w.a)(this,e)}return Object(S.a)(e,[{key:"loadStargazers",value:function(){var t=Object(k.a)(y.a.mark((function t(r,a,n,s,c){var o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.loadStargazers(r,a,s,c);case 2:if(null!==(o=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return e.colorIndex=e.colorIndex+1===ye.length?0:e.colorIndex+1,t.abrupt("return",{username:r,repo:a,color:ye[e.colorIndex],stargazerData:o,stats:ve.calcStats(o),forecast:null!==n?ve.calcForecast(o,n.daysBackwards,n.daysForward,n.numValues):null});case 7:case"end":return t.stop()}}),t)})));return function(e,r,a,n,s){return t.apply(this,arguments)}}()}]),e}();ke.colorIndex=-1;var we=new ke;Object.freeze(we);var Se=we;function Ce(e){var t=e.preloadedRepos,r=Object(a.useState)(t||[]),n=Object(i.a)(r,2),s=n[0],c=n[1],o=Object(a.useState)({show:!1,title:"",message:""}),u=Object(i.a)(o,2),d=u[0],j=u[1],b=Object(a.useState)({isLoading:!1,loadProgress:0}),h=Object(i.a)(b,2),f=h[0],m=h[1],O=Object(a.useState)(oe),v=Object(i.a)(O,2),w=v[0],S=v[1],C=Object(a.useState)(null),D=Object(i.a)(C,2),R=D[0],T=D[1],N=function(e){m({isLoading:!0,loadProgress:e})},P=Object(a.useRef)(),L=Object(a.useRef)(!1),z=Object(a.useRef)(null),A=function(e,t){j({show:!0,title:e,message:t})},M=function(){j({show:!1,title:"",message:""})},I=function(){var e=Object(k.a)(y.a.mark((function e(t,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&""!==t&&r&&""!==r){e.next=3;break}return A("Missing details","Please provide both Username and Repo name"),e.abrupt("return");case 3:if(void 0===s.find((function(e){return e.username===t&&e.repo===r}))){e.next=6;break}return A("Repo exists","Repo already exists"),e.abrupt("return");case 6:if(!(s.length+1>8)){e.next=9;break}return A("Reached max number of repos allowed","Maximum repos that can be shown at the same time is 8"),e.abrupt("return");case 9:return P.current=!1,e.prev=10,e.next=13,Se.loadStargazers(t,r,R,N,(function(){return P.current}));case 13:null!==(a=e.sent)&&c([].concat(Object(x.a)(s),[a])),m({isLoading:!1,loadProgress:0}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),A("Error loading stargazers",e.t0.message),m({isLoading:!1,loadProgress:0});case 22:P.current=!1;case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t,r){return e.apply(this,arguments)}}(),B=function(e){1===s.length&&T(null),c(s.filter((function(t){return t.username!==e.username||t.repo!==e.repo})))};return Object(p.jsxs)("div",{children:[f.isLoading?Object(p.jsx)(E.a,{now:f.loadProgress,variant:"success",animated:!0}):Object(p.jsx)("div",{className:"progress MainContainer-progressBarPlaceholder"}),Object(p.jsx)(Z,{onRepoDetails:I,loadInProgress:f.isLoading,onStopClick:function(){P.current=!0}}),Object(p.jsx)(U.a,{children:Object(p.jsx)("div",{className:"MainContainer-closableBadgesWrapper",children:s.map((function(e){return Object(p.jsx)("div",{className:"MainContainer-closableBadgeContainer",children:Object(p.jsx)(pe,{text:e.username+"/"+e.repo,badgeCookieData:{username:e.username,repo:e.repo},onBadgeClose:B,color:e.color,href:_.getRepoUrl(e.username,e.repo)})},e.username+"/"+e.repo)}))})}),s.length>0?Object(p.jsx)(le,{repos:s,onTimeRangeChange:function(e){if(z.current=e,L.current){for(var t=s.slice(),r=0;r<t.length;r++)t[r].stats=ve.calcStats(t[r].stargazerData,L.current?z.current:null);c(t)}},chartType:w,onChartTypeChange:S}):null,s.length>0?Object(p.jsx)(ae,{onForecastProps:function(e){for(var t=s.slice(),r=0;r<t.length;r++)t[r].forecast=null===e?null:ve.calcForecast(t[r].stargazerData,e.daysBackwards,e.daysForward,e.numValues);c(t),T(e)}}):null,s.length>0?Object(p.jsx)(U.a,{children:Object(p.jsx)(de,{repos:s,requestToSyncChartTimeRange:function(e){L.current=e;for(var t=s.slice(),r=0;r<t.length;r++)t[r].stats=ve.calcStats(t[r].stargazerData,e?z.current:null);c(t)}})}):null,s.length>0?Object(p.jsx)(U.a,{children:Object(p.jsx)(be,{repos:s})}):null,Object(p.jsx)(me,{pageEmpty:0===s.length}),Object(p.jsxs)(g.a,{show:d.show,onHide:M,children:[Object(p.jsx)(g.a.Header,{closeButton:!0,children:Object(p.jsx)(g.a.Title,{children:d.title})}),Object(p.jsx)(g.a.Body,{children:d.message}),Object(p.jsx)(g.a.Footer,{children:Object(p.jsx)(l.a,{variant:"primary",onClick:M,children:"Close"})})]})]})}function De(e){var t=e.preloadedRepos;return Object(p.jsxs)("div",{children:[Object(p.jsx)(q,{}),Object(p.jsx)(Ce,{preloadedRepos:t})]})}r(134);function Re(e){var t=e.location,r=Object(a.useRef)(),n=Object(a.useRef)(),s=Object(a.useState)(0),c=Object(i.a)(s,2),o=c[0],u=c[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],h=j[1],f=Object(a.useState)([]),g=Object(i.a)(f,2),m=g[0],O=g[1],v=Object(a.useState)([]),w=Object(i.a)(v,2),S=w[0],C=w[1],D=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.current[n.current],e.prev=1,e.next=4,Se.loadStargazers(t.username,t.repo,null,(function(e){return u(e)}),(function(){return!1}));case 4:a=e.sent,O([].concat(Object(x.a)(m),[a])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C([].concat(Object(x.a)(S),[{repoDetails:t,message:e.t0.message}]));case 11:n.current=n.current+1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r.current=function(){var e=new URLSearchParams(t.search),r=[];return e.forEach((function(e,t){if("r"===t){var a=e.split(",");r.length<8&&2===a.length&&void 0===r.find((function(e){return e.username===a[0]&&e.repo===a[1]}))&&r.push({username:a[0],repo:a[1]})}})),r}(),r.current.length>0?(n.current=0,D()):(h(!0),u(100))}),[]),Object(a.useEffect)((function(){(m.length>0||S.length>0)&&(n.current<r.current.length?D():(h(!0),u(100)))}),[m,S]),Object(p.jsx)("div",{children:!1===b||S.length>0?Object(p.jsxs)(U.a,{className:"RepoPreloader-topContainer",children:[Object(p.jsx)("h3",{children:"Loading Repos Data..."}),Object(p.jsx)("h5",{children:b&&S.length>0?"Error loading repos":void 0===r.current?"":r.current[n.current].username+"/"+r.current[n.current].repo}),Object(p.jsx)(E.a,{className:"RepoPreloader-ProgressBar-Reseting",now:o,variant:b&&S.length>0?"warning":"success",animated:!0}),S.length>0?Object(p.jsxs)(U.a,{className:"RepoPreloader-errorContainer",children:[S.map((function(e,t){return Object(p.jsxs)("h6",{children:[Object(p.jsxs)("b",{children:["Error loading ",e.repoDetails.username,"/",e.repoDetails.repo,":"]})," ",e.message]},t)})),b?Object(p.jsx)(l.a,{onClick:function(){C([])},children:"Continue"}):null]}):null]}):Object(p.jsx)(De,{preloadedRepos:m})})}var Te=r(86),Ne=r(8),Pe=r(68);function Le(){return Object(p.jsxs)(Te.a,{children:[Object(p.jsx)(Ne.a,{exact:!0,path:"/",component:De}),Object(p.jsx)(Ne.a,{path:"/preload",component:Re})]})}(function(){Pe.a.initialize("UA-104097715-1"),Pe.a.pageview(window.location.pathname+window.location.search)})();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(137);s.a.render(Object(p.jsx)(Le,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e,t,r){},83:function(e){e.exports=JSON.parse('{"name":"startrack-js","version":"2.4.3","private":true,"homepage":"http://seladb.github.io/StarTrack-js","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.26","@fortawesome/free-brands-svg-icons":"^5.12.0","@fortawesome/free-solid-svg-icons":"^5.12.0","@fortawesome/react-fontawesome":"^0.1.8","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","apexcharts":"3.33.0","axios":"^0.21.2","bootstrap":"^4.4.1","least-squares":"0.0.2","parse-github-url":"^1.0.2","react":"^16.12.0","react-apexcharts":"^1.3.7","react-bootstrap":"^1.0.0-beta.16","react-dom":"^16.12.0","react-ga":"^2.7.0","react-github-btn":"^1.1.1","react-responsive":"^8.0.3","react-router-dom":"^5.1.2","react-scripts":"4.0.3"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build","start":"react-scripts --openssl-legacy-provider start","build":"react-scripts --openssl-legacy-provider build","test":"react-scripts --openssl-legacy-provider test","eject":"react-scripts --openssl-legacy-provider eject","format":"prettier --config .prettierrc . --check .","format:fix":"prettier --config .prettierrc . --write","lint":"eslint --ext js,jsx,ts,tsx src/","lint:fix":"eslint --ext js,jsx,ts,tsx --fix src/"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"babel-eslint":"^10.1.0","eslint":"^7.28.0","eslint-config-prettier":"^8.3.0","eslint-config-standard":"^16.0.3","eslint-plugin-import":"^2.23.4","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","eslint-plugin-promise":"^5.1.0","eslint-plugin-react":"^7.24.0","gh-pages":"^2.2.0","husky":"^6.0.0","lint-staged":"^11.0.0","prettier":"^2.3.1","pretty-quick":"^3.1.1"},"lint-staged":{"*.js":"eslint"},"husky":{"hooks":{"pre-commit":"lint-staged && pretty-quick --staged"}}}')},92:function(e,t,r){}},[[138,1,2]]]);
//# sourceMappingURL=main.9881d4a1.chunk.js.map